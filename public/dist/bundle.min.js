!function(t,e){t&&!t.getElementById("livereloadscript")&&((e=t.createElement("script")).async=1,e.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",e.id="livereloadscript",t.getElementsByTagName("head")[0].appendChild(e))}(self.document),function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function e(e){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?t(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(){i=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,i){t[e]=i.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,i){return t[e]=i}}function c(t,e,i,n){var s=e&&e.prototype instanceof m?e:m,o=Object.create(s.prototype),a=new F(n||[]);return r(o,"_invoke",{value:E(t,i,a)}),o}function h(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function m(){}function f(){}function v(){}var g={};l(g,o,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(L([])));y&&y!==e&&n.call(y,o)&&(g=y);var b=v.prototype=m.prototype=Object.create(g);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(r,s,o,a){var u=h(t[r],t,s);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==typeof c&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){i("next",t,o,a)}),(function(t){i("throw",t,o,a)})):e.resolve(c).then((function(t){l.value=t,o(l)}),(function(t){return i("throw",t,o,a)}))}a(u.arg)}var s;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return s=s?s.then(r,r):r()}})}function E(t,e,i){var n="suspendedStart";return function(r,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw s;return A()}for(i.method=r,i.arg=s;;){var o=i.delegate;if(o){var a=I(o,i);if(a){if(a===d)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var u=h(t,e,i);if("normal"===u.type){if(n=i.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n="completed",i.method="throw",i.arg=u.arg)}}}function I(t,e){var i=e.method,n=t.iterator[i];if(void 0===n)return e.delegate=null,"throw"===i&&t.iterator.return&&(e.method="return",e.arg=void 0,I(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var s=r.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=v,r(b,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:f,configurable:!0}),f.displayName=l(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},C(w.prototype),l(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,i,n,r,s){void 0===s&&(s=Promise);var o=new w(c(e,i,n,r),s);return t.isGeneratorFunction(i)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(b),l(b,u,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),i=[];for(var n in e)i.push(n);return i.reverse(),function t(){for(;i.length;){var n=i.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,n){return o.type="throw",o.arg=t,e.next=i,n&&(e.method="next",e.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),S(i),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;S(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:L(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e,i,n,r,s,o){try{var a=t[s](o),u=a.value}catch(t){return void i(t)}a.done?e(u):Promise.resolve(u).then(n,r)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C(n.key),n)}}function a(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e,i){return(e=C(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function m(t,e,i){return m=d()?Reflect.construct.bind():function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&h(r,i.prototype),r},m.apply(null,arguments)}function f(t){var e="function"==typeof Map?new Map:void 0;return f=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return m(t,arguments,c(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,t)},f(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){var e=d();return function(){var i,n=c(t);if(e){var r=c(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}(this,i)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?t:i):r.value}},p.apply(this,arguments)}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function b(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return y(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function C(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var w=function(t){l(i,t);var e=g(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return s(this,i),u(v(t=e.call(this)),"images",[]),u(v(t),"tabs",[]),u(v(t),"info",void 0),u(v(t),"selectedImageNum",void 0),u(v(t),"container",void 0),u(v(t),"list",void 0),u(v(t),"tabContainer",void 0),u(v(t),"listElements",[]),t.addEventListener("wheel",t._onScroll,{passive:!1}),t.setImages(n),t.setInfo(r),t.setTabs(a),t.selectedImageNum=o,t.render(),t}return a(i,[{key:"setTabs",value:function(t){this.tabs=t}},{key:"setImages",value:function(t){this.images=t}},{key:"setInfo",value:function(t){this.info=t}},{key:"getInfo",value:function(){return this.info}},{key:"select",value:function(t){void 0!==this.selectedImageNum&&this.listElements[this.selectedImageNum].classList.remove("selected");var e=this.listElements[t];if(e){var i=this.list.clientWidth/this.listElements[t].clientWidth||1,n=e.clientWidth,r=this.listElements[0].offsetLeft;e.offsetLeft,e.offsetLeft,this.list.scrollTo((t-i/2+1)*n-r,0),this.listElements[t].classList.add("selected"),this.selectedImageNum=t}else this.list.scrollTo(0,0);this.updateTabs()}},{key:"_onScroll",value:function(t){t.preventDefault(),this.list.scrollTo(this.list.scrollLeft+t.deltaY,0)}},{key:"_onSelectImage",value:function(t,e,i){this.onSelectImage&&this.onSelectImage(t,e,i),this.select(i)}},{key:"_onSelectTab",value:function(t,e,i){console.log("tab selected",e,i),this.onSelectTab&&this.onSelectTab(t,e,i)}},{key:"createFilmStripItems",value:function(t){for(var e=this,i=document.createElement("ul"),n=function(n){var r,s,o=document.createElement("li");e.selectedImageNum===n?o.classList.add("selected"):o.classList.remove("selected");var a,u=document.createElement("img");null!==(r=t[n])&&void 0!==r&&r.size&&Array.isArray(t[n].size)?u.src=t[n].size[t[n].size.length-1]:u.src=(null===(a=t[n])||void 0===a?void 0:a.src)||t[n];u.addEventListener("click",(function(i){return e._onSelectImage(i,t[n],n)})),null!==(s=t[n])&&void 0!==s&&s.title&&u.setAttribute("title",t[n].title),o.appendChild(u),e.listElements[n]=o,i.appendChild(o)},r=0;r<t.length;r++)n(r);return i}},{key:"updateTabs",value:function(){var t,e,i=this,n=this.tabs;(this.tabContainer&&(this.tabContainer.innerHTML=""),n.length<1)&&(n=[{title:null===(t=this.info)||void 0===t?void 0:t.description,caption:null===(e=this.info)||void 0===e?void 0:e.title}]);for(var r=function(t){var e=n[t],r=document.createElement("div");r.classList.add("tab",t),e.class&&r.classList.add(e.class),r.innerHTML=e.caption||e.name||e.title||t,r.setAttribute("title",e.title||e.caption||e.name||t),r.addEventListener("click",(function(n){i._onSelectTab(n,e,t)})),i.tabContainer.appendChild(r)},s=0;s<n.length;s++)r(s)}},{key:"render",value:function(){var t=document.createElement("div");t.classList.add("filmStripContainer");var e=this.createFilmStripItems(this.images);t.appendChild(e),this.tabContainer=document.createElement("div"),this.tabContainer.classList.add("tabContainer"),this.updateTabs(),t.appendChild(this.tabContainer),this.replaceChildren(t),this.list=e,this.container=t}}]),i}(f(HTMLElement));customElements.define("film-strip",w);var E=function(t){l(i,t);var e=g(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return s(this,i),u(v(t=e.call(this,void 0,void 0,r)),"albums",void 0),u(v(t),"selectedAlbumNum",void 0),t.setAlbums(n),t.selectedAlbumNum=o,t.selectedImageNum=r,t.render(),t}return a(i,[{key:"setAlbums",value:function(t){this.albums=t}},{key:"select",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;e!==this.selectedAlbumNum&&(this.selectedAlbumNum=e,this.render()),p(c(i.prototype),"select",this).call(this,t)}},{key:"getAlbum",value:function(t){var e;return void 0===t&&(t=this.selectedAlbumNum),null===(e=this.albums)||void 0===e?void 0:e[t]}},{key:"_onSelectImage",value:function(t,e,i){void 0!==e.photoset?this.select(e.titleImageNum,e.photoset):this.select(i,this.selectedAlbumNum),this.onSelectImage&&this.onSelectImage(t,this.selectedImageNum,this.selectedAlbumNum)}},{key:"_onSelectTab",value:function(t,e,i){0===i&&this.select(void 0,void 0)}},{key:"updateTabs",value:function(){var t=this.getAlbum(),e=[{name:"Albums",title:"Browse existing albums"}];if(t){var n;e.push({name:t.title,class:"currentAlbum",title:t.description||t.title});var r=null===(n=t.photos)||void 0===n?void 0:n[this.selectedImageNum];r&&e.push({name:r.title,class:"currentImage",title:r.description||r.title})}this.setTabs(e),p(c(i.prototype),"updateTabs",this).call(this)}},{key:"render",value:function(){var t=this.getAlbum();t?this.images!==t.photos&&(this.images=t.photos):this.albums&&(this.images=this.getAlbumTitleImages()),this.images?p(c(i.prototype),"render",this).call(this):console.error("AlbumStrip: No available Images to render")}},{key:"getAlbumList",value:function(){for(var t=[],e=0;e<this.albums.length;e++){for(var i=this.albums[e],n=0;n<i.photos.length;n++)i.photos[n].id===i.primary&&(i.titleImage=i.photos[n],i.titleImageNum=n);t.push(i)}return t}},{key:"getAlbumTitleImages",value:function(){for(var t=this.getAlbumList(),e=[],i=0;i<t.length;i++){var n=t[i].titleImage;n.photoset=i,n.photosetTitle=t[i].title,n.titleImageNum=t[i].titleImageNum,e.push(n)}return e}}]),i}(w);customElements.define("album-strip",E);var I=function(t){l(i,t);var e=g(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return s(this,i),u(v(t=e.call(this)),"listItems",void 0),t.listItems=n,t.render(),t}return a(i,[{key:"render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e=e||this.listItems;var i=function(){if(e[n]){var i=document.createElement("li");i.classList.add(n);var r=document.createElement("div");r.classList.add("label");var s=document.createElement("span");s.innerHTML=n,r.appendChild(s),i.appendChild(r),(r=document.createElement("div")).classList.add("value"),Array.isArray(e[n])||(e[n]=[e[n]]),e[n].forEach((function(t){t instanceof Element?r.appendChild(t):((s=document.createElement("span")).innerHTML=t,r.appendChild(s))})),i.appendChild(r),t.appendChild(i)}};for(var n in e)i()}}]),i}(f(HTMLElement));customElements.define("ul-tags",I);var k=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;s(this,t),u(this,"svgNS","http://www.w3.org/2000/svg"),u(this,"meta",{title:"Chameleon | Image Gallery",delimiter:" | "}),u(this,"breakTimeDuration",10),u(this,"userIdleTimeDuration",7.5),u(this,"transitionDuration",2),u(this,"showCursorDuration",10),u(this,"width",void 0),u(this,"height",void 0),u(this,"lazyLoad",!1),u(this,"afterTransition",void 0),u(this,"direction","random"),u(this,"fps",20),u(this,"pauseMode","smooth"),u(this,"alignImages",{x:.5,y:.5}),u(this,"changeAlbumOnImageNumOverflow",!0),u(this,"transitionFrame",0),u(this,"breakTimeFrame",0),u(this,"totalFrames",0),u(this,"suspended",!1),u(this,"currentFPS",Array.isArray(this.fps)?this.fps[0]:this.fps),u(this,"workload",0),u(this,"timer",[Date.now()]),u(this,"keysPressed",[]),u(this,"paused",!1),u(this,"userIdleTime",0),u(this,"pureMode",!1),u(this,"firstRun",!0),u(this,"albums",[]),u(this,"previousImage",void 0),u(this,"currentImageNum",0),u(this,"currentAlbumNum",0),u(this,"target",void 0),u(this,"canvasContainer",void 0),u(this,"canvas",void 0),u(this,"mask",void 0),u(this,"imageInfoBox",void 0),u(this,"filmStrip",void 0),u(this,"overlays",{imageInfoBox:{autostart:2.5,duration:5,idleEnd:!0,idleMax:5,pauseHide:!0},filmStrip:{autostart:!1,idleEnd:!0,idleMax:5,pauseHide:!0}}),i&&this.setImages(i),void 0!==n&&(this.width=n),void 0!==r&&(this.height=r),this.target=e,this.addEventListeners(),this.dispatchEvent("Resize")}var o,l;return a(t,[{key:"destroy",value:function(){this.target.removeChild(this.canvasContainer),this.removeEventListeners(),this.target=void 0,this.run=void 0}},{key:"requestFullscreen",value:function(t,e){var i=this;t.addEventListener("click",(function(){document.fullscreenElement?document.exitFullscreen():e.requestFullscreen?e.requestFullscreen(e):e.mozRequestFullScreen?e.mozRequestFullScreen(e):e.webkitRequestFullscreen?e.webkitRequestFullscreen(e):e.msRequestFullscreen&&e.msRequestFullscreen(e)})),addEventListener("fullscreenchange",(function(t){i.dispatchEvent("FullscreenChange",t)}))}},{key:"isFullscreen",value:function(){return window.fullScreen||window.innerWidth==screen.width&&window.innerHeight==screen.height}},{key:"removeEventListeners",value:function(){var t=this;document.removeEventListener("mousemove",(function(e){return t.dispatchEvent("MouseMove",e)})),document.removeEventListener("keyup",(function(e){return t.dispatchEvent("KeyUp",e)})),document.removeEventListener("keydown",(function(e){return t.dispatchEvent("KeyDown",e)})),window.removeEventListener("resize",(function(e){return t.dispatchEvent("Resize",e)})),window.removeEventListener("orientationchange",(function(e){return t.dispatchEvent("Resize",e)})),window.removeEventListener("offline",(function(e){return t.dispatchEvent("Offline",e)})),window.removeEventListener("online",(function(e){return t.dispatchEvent("Online",e)}))}},{key:"addEventListeners",value:function(){var t=this;document.addEventListener("mousemove",(function(e){return t.dispatchEvent("MouseMove",e)})),document.addEventListener("keyup",(function(e){return t.dispatchEvent("KeyUp",e)})),document.addEventListener("keydown",(function(e){return t.dispatchEvent("KeyDown",e)})),window.addEventListener("resize",(function(e){return t.dispatchEvent("Resize",e)})),window.addEventListener("orientationchange",(function(e){return t.dispatchEvent("Resize",e)})),window.addEventListener("offline",(function(e){return t.dispatchEvent("Offline",e)})),window.addEventListener("online",(function(e){return t.dispatchEvent("Online",e)}))}},{key:"navigate",value:function(){var t,e,i,r,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"+1",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+0";if(this.isPaused()&&this.dispatchEvent("PauseEnd"),"object"===n(s)||void 0===s){if(s.album&&this.setCurrentAlbumNum(this.getAlbumNumByPropertyValue(s.album)),s.image){var a=this.getImageNumByPropertyValue(s.image);a&&(this.setCurrentAlbumNum(a.album),this.setCurrentImageNum(a.image))}}else void 0!==o&&this.setCurrentAlbumNum(parseInt(o)+(("string"==typeof o||o instanceof String)&&["+","-"].indexOf(-1!==(o||0).substring(0,1))?this.getCurrentAlbumNum():0)),void 0!==s&&this.setCurrentImageNum(parseInt(s)+(("string"==typeof s||s instanceof String)&&["+","-"].indexOf(-1!==(s||0).substring(0,1))?this.getCurrentImageNum():0));var u=(null===(t=this.getAlbum())||void 0===t?void 0:t.title)||(null===(e=this.getAlbum())||void 0===e?void 0:e.name),l=(null===(i=this.getCurrentImage())||void 0===i?void 0:i.title)||(null===(r=this.getCurrentImage())||void 0===r?void 0:r.name);if(document.title=this.meta.title+this.meta.delimiter+u+this.meta.delimiter+l,!this.isFullscreen()){var c=new URL(window.location);c.searchParams.set("album",u),c.searchParams.set("image",l),history.pushState({},"",c)}this.firstRun&&(this.transitionFrame=void 0,this.firstRun=!1,this.suspended=!0),void 0===this.transitionFrame?this.startTransition():this.afterTransition=this.startTransition,this.filmStrip.select(this.currentImageNum,this.currentAlbumNum),this.dispatchEvent("Navigation",{target:this.currentImageNum})}},{key:"startTransition",value:function(){this.suspended=!0,this.transitionFrame=void 0,this.breakTimeFrame=0,this.currentDirection="random"===this.direction?360*Math.random():this.direction,this.updateClipPathTransition(),this.dispatchEvent("TransitionStart"),this.showImage()}},{key:"getCurrentImage",value:function(){return this.getAlbumImages()[this.currentImageNum]}},{key:"getImage",value:function(t){return this.getAlbumImages()[t]}},{key:"setCurrentAlbumNum",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0!==t&&t!==this.currentAlbumNum&&(this.currentAlbumNum=t%this.albums.length<0?t%this.albums.length+this.albums.length:t%this.albums.length,this.updateFilmStrip()),void 0!==e&&e!==this.currentImageNum&&this.setCurrentImageNum(e),this.currentAlbumNum}},{key:"getAlbum",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return this.albums[t||this.currentAlbumNum]}},{key:"getAlbumInfo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i=e({},this.albums[t||this.currentAlbumNum]);return delete i.images,i}},{key:"getCurrentAlbumNum",value:function(){return this.currentAlbumNum}},{key:"getAlbumImages",value:function(){var t,e,i,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(null===(t=this.albums[r||this.currentAlbumNum])||void 0===t?void 0:t.photos)||(null===(e=this.albums)||void 0===e?void 0:e.photos)||this.photos||(null===(i=this.albums[r||this.currentAlbumNum])||void 0===i?void 0:i.images)||(null===(n=this.albums)||void 0===n?void 0:n.images)||this.albums}},{key:"getImageSrc",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("string"==typeof t||t instanceof String)return t;try{return(null==t?void 0:t.src)||(null==t?void 0:t.size[e])}catch(e){console.log("image #"+(t.id||t.title)+" does not provide src/sizes",e,t)}}},{key:"setCurrentImageNum",value:function(t){this.changeAlbumOnImageNumOverflow&&(t>=this.getAlbumImages().length?(this.setCurrentAlbumNum(this.getCurrentAlbumNum()+1),t=0):t<0&&this.setCurrentAlbumNum(this.getCurrentAlbumNum()-1));var e=this.getAlbumImages();return this.currentImageNum=(t%e.length<0?t%e.length+e.length:t%e.length)||0}},{key:"getCurrentImageNum",value:function(){return this.currentImageNum}},{key:"setWidth",value:function(t){this.width=t}},{key:"setHeight",value:function(t){this.height=t}},{key:"setMetaData",value:function(t){this.meta=e(e({},this.meta),t)}},{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;!0!==(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.width||this.height)||this.dispatchEvent("Resize"),this.canvasContainer&&this.target.removeChild(this.canvasContainer),this.createCanvas(),this.createInfoBox(),this.createFilmStrip(),this.navigate(t||this.currentImageNum)}},{key:"updateOverlays",value:function(){for(var t=0,e=Object.keys(this.overlays);t<e.length;t++){var i=e[t],n=this.overlays[i];this.pureMode||this.transitionFrame||this.suspended||!(n.autostart>0&&this.breakTimeFrame===n.autostart*this.fps||this.breakTimeFrame>0&&!0===n.idleEnd&&0===this.userIdleTime)?(this.pureMode||n.idleMax*this.fps===this.userIdleTime&&(!n.duration||this.breakTimeFrame>n.duration*this.fps))&&this[i].classList.add("hide"):this[i].classList.remove("hide")}}},{key:"update",value:function(){this.userIdleTime++,this.userIdleTime%20==0&&this.dispatchEvent("Idle",this.userIdleTime),this.isPaused()||(void 0!==this.transitionFrame?(this.transitionFrame++,this.breakTimeFrame=0):this.suspended||this.breakTimeFrame++,this.updateClipPathTransition()),this.breakTimeFrame>this.breakTimeDuration*this.fps&&this.userIdleTime>this.userIdleTimeDuration*this.fps&&!this.suspended&&this.navigate("+1")}},{key:"updateClipPathTransition",value:function(){this.suspended&&0!==this.transitionFrame?document.getElementById("imageGroup1").setAttributeNS(null,"opacity",1):void 0!==this.transitionFrame&&this.transitionFrame<=this.transitionDuration*this.fps&&!this.suspended&&document.getElementById("imageGroup1").setAttributeNS(null,"opacity",this.transitionFrame/(this.transitionDuration*this.fps||10)),this.transitionFrame>this.transitionDuration*this.fps&&this.dispatchEvent("TransitionEnd")}},{key:"updateFilmStrip",value:function(){this.filmStrip.setImages(this.getAlbumImages()),this.filmStrip.setInfo(this.getAlbumInfo()),this.filmStrip.render()}},{key:"run",value:function(){var t=this;this.isPaused()&&(this.paused++,this.dispatchEvent("Paused",this.paused)),this.updateOverlays(),this.update(),this.userIdleTime===this.showCursorDuration*this.fps&&(document.body.style.cursor="none"),this.totalFrames++,setTimeout((function(){return t.run()}),1e3/this.fps)}},{key:"getImageNumByPropertyValue",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["id","title","name"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;("string"==typeof i||i instanceof String)&&(i=[i]),n=null!==(e=n)&&void 0!==e?e:this.getCurrentAlbumNum();for(var r=-1;r<this.albums.length;r++){var s=-1===r?n:r;if(void 0!==r)for(var o=this.albums[s].photos||this.albums[s].images,a=0;a<o.length;a++){var u,l=o[a],c=b(i.values());try{for(c.s();!(u=c.n()).done;){if(l[u.value]==t)return{album:s,image:a}}}catch(t){c.e(t)}finally{c.f()}}}console.error("image "+t+" not found")}},{key:"getAlbumNumByPropertyValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["id","title","name"];("string"==typeof e||e instanceof String)&&(e=[e]);for(var i=0;i<this.albums.length;i++){var n,r=b(e.values());try{for(r.s();!(n=r.n()).done;){var s=n.value;if(this.albums[i][s]==t)return i}}catch(t){r.e(t)}finally{r.f()}}console.error("album "+t+" not found")}},{key:"loadData",value:(o=i().mark((function t(){var e,n=this,r=arguments;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:"./data/albums.json",t.abrupt("return",fetch(e).then((function(t){return t.json()})).catch((function(t){n.dispatchEvent("Error",void 0,t)})));case 2:case"end":return t.stop()}}),t)})),l=function(){var t=this,e=arguments;return new Promise((function(i,n){var s=o.apply(t,e);function a(t){r(s,i,n,a,u,"next",t)}function u(t){r(s,i,n,a,u,"throw",t)}a(void 0)}))},function(){return l.apply(this,arguments)})},{key:"setImages",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;void 0!==e&&(this.lazyLoad=e),this.albums=t}},{key:"getImageSlot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return document.getElementById("imageSlot"+(void 0!==t?t:this.albumslots.length-1))}},{key:"dispatchEvent",value:function(t){for(var e="on"+t,i="_on"+t,n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];"function"==typeof this.onEvent&&this.onEvent.apply(this,[t].concat(r)),"function"==typeof this[i]&&this[i].apply(this,r),"function"==typeof this[e]&&this[e].apply(this,r)}},{key:"isPaused",value:function(){return this.paused>0}},{key:"setPaused",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return void 0===e&&(e=!this.paused),!0===e?this.transitionFrame&&!this.isPaused()?(this.afterTransition=function(){return t.dispatchEvent("PauseStart")},this.userIdleTime=this.infoBoxDuration*this.fps-1):this.dispatchEvent("PauseStart"):this.dispatchEvent("PauseEnd"),e}},{key:"_onFullscreenChange",value:function(t){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||t.preventDefault()}},{key:"_onScroll",value:function(t){this._onIdleEnd()}},{key:"_onPureStart",value:function(){this.pureMode=!0}},{key:"_onPureEnd",value:function(){this.pureMode=!1,this._onIdleEnd()}},{key:"_onKeyUp",value:function(t){switch("Escape"===t.key?this.pureMode?this.dispatchEvent("PureEnd"):this.dispatchEvent("PureStart"):" "===t.key?this.setPaused():-1===this.keysPressed.indexOf("Shift")&&this.dispatchEvent("IdleEnd",this.userIdleTime),t.key){case"ArrowRight":this.navigate("+1");break;case"ArrowLeft":this.navigate("-1");break;case"ArrowUp":this.navigate(0,"-1");break;case"ArrowDown":this.navigate(0,"+1")}-1!==this.keysPressed.indexOf(t.key)&&this.keysPressed.splice(this.keysPressed.indexOf(t.key),1)}},{key:"_onPauseEnd",value:function(){this.paused=0}},{key:"_onPauseStart",value:function(){var t,e;(this.paused=1,this.overlays.imageInfoBox.pauseHide)&&(null===(t=this.imageInfoBox)||void 0===t||t.classList.add("hide"));this.overlays.filmStrip.pauseHide&&(null===(e=this.filmStrip)||void 0===e||e.classList.add("hide"))}},{key:"_onResize",value:function(t){var e;this.width=this.target.clientWidth||this.target.width||document.clientWidth||800,this.height=this.target.clientHeight||this.target.height||document.clientHeight||600,null===(e=this.canvas)||void 0===e||e.setAttribute("viewBox","0 0 "+this.width+" "+this.height),console.debug("canvas size: "+this.width+"x"+this.height+" fullscreen: "+this.isFullscreen());var i=this.getImageSlot(1);i&&(i.background.setAttributeNS(null,"width",this.width),i.background.setAttributeNS(null,"height",this.height))}},{key:"_onIdleEnd",value:function(){this.userIdleTime>0&&(this.userIdleTime=0,document.body.style.cursor="auto")}},{key:"_onMouseMove",value:function(){this.dispatchEvent("IdleEnd",this.userIdleTime),this.userIdleTime=0}},{key:"_onTransitionStart",value:function(){this.imageInfoBox.classList.add("hide")}},{key:"_onTransitionEnd",value:function(){this.showImageInfo(),this.transitionFrame=void 0,this.breakTimeFrame=0,this.suspended=!1,this.paused&&this.setPaused(!0),this.afterTransition&&(this.afterTransition(),this.afterTransition=void 0)}},{key:"_onError",value:function(t){this.showMessage("An error occurred",t),console.error(t)}},{key:"_onOnline",value:function(t){this.navigate("+0","+0")}},{key:"_onOffline",value:function(t){console.log("offline",t)}},{key:"_onImageLoad",value:function(t,e){if(this.target instanceof HTMLCanvasElement)this.target.getContext("2d").drawImage(t.target,0,0);else if(this.target instanceof HTMLElement){if(t.target.setAttributeNS(null,"x",(this.width-t.target.getBBox().width)*this.alignImages.x),t.target.setAttributeNS(null,"y",(this.height-t.target.getBBox().height)*this.alignImages.y),t.target===this.getImageSlot(1))!this.debugMask&&this.clipPath&&document.getElementById("imageGroup1").setAttributeNS(null,"clip-path","url(#"+this.clipPathId+")"),this.getImageSlot(1).setAttributeNS(null,"visibility","visible"),this.suspended=!1,this.transitionFrame=0,this.updateClipPathTransition();else if(t.target===this.getImageSlot(0)){var i=this.getCurrentImage();this.getImageSlot(1).setAttributeNS(null,"href",this.getImageSrc(i)),!this.debugMask&&this.clipPath&&document.getElementById("imageGroup1").setAttributeNS(null,"clip-path","url(#"+this.clipPathId+")"),this.getImageSlot(1).setAttributeNS(null,"visibility","visible")}}}},{key:"set",value:function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i],s=e[r];t[r]=s}}},{key:"showImage",value:function(){var t=this.getImageSlot(1),e=this.getImageSlot(0);if(t.getAttributeNS(null,"href"))document.getElementById("imageGroup1").removeAttributeNS(null,"clip-path"),e.setAttributeNS(null,"href",t.getAttributeNS(null,"href"));else{var i=this.getCurrentImage();t.setAttributeNS(null,"visibility","hidden"),t.setAttributeNS(null,"href",this.getImageSrc(i))}}},{key:"createCanvas",value:function(){var t=this,e=this.width,i=this.height,n=this.target,r=null,s=document.createElementNS(this.svgNS,"svg");s.setAttribute("viewBox","0 0 "+e+" "+i);for(var o=0;o<2;o++){var a=document.createElementNS(this.svgNS,"g");a.id="imageGroup"+o,a.setAttributeNS(null,"class","imageGroup");var u=document.createElementNS(this.svgNS,"image");u.id="imageSlot"+o,u.setAttributeNS(null,"visibility","visible"),u.addEventListener("error",(function(e){return t.dispatchEvent("Error",e)})),u.onload=function(e){return t.dispatchEvent("ImageLoad",e,t.getCurrentImage())};var l=document.createElementNS(this.svgNS,"rect");l.setAttributeNS(null,"width",this.width),l.setAttributeNS(null,"height",this.height),l.setAttributeNS(null,"fill","black"),u.background=l,a.appendChild(l),a.appendChild(u),s.appendChild(a)}this.createClipPath&&(r=this.createClipPath(),s.appendChild(r),this.clipPath=r);var c=document.createElement("div");n.appendChild(c),this.canvasContainer=c,this.canvasContainer.setAttribute("class","canvasContainer"),this.canvasContainer.style.width="100%",this.canvasContainer.style.height="100%",n instanceof HTMLCanvasElement?n.getContext("2d").drawImage(s,0,0):c.appendChild(s),this.canvas=s,this.dispatchEvent("CanvasCreated",{canvasContainer:this.canvasContainer,canvas:s,clipPath:r,context:n})}},{key:"createFilmStrip",value:function(){var t=this;this.filmstrip||(this.filmStrip=new E(this.albums,this.currentImageNum,this.currentAlbumNum),this.filmStrip.classList.add("filmStrip","hide"),this.filmStrip.onSelectImage=function(e,i,n){t.navigate(i,n)}),this.canvasContainer.appendChild(this.filmStrip)}},{key:"createInfoBox",value:function(){if(!this.imageInfoBox){var t=document.createElement("div");t.classList.add("infoBox","hide"),t.onclick=function(e){t.classList.toggle("minified")},this.imageInfoBox=t}this.canvasContainer.appendChild(this.imageInfoBox)}},{key:"showImageInfo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.afterTransition||t){var i=this.imageInfoBox;t&&i.classList.remove("hide");var n=this.getCurrentImage();if("string"==typeof n||n instanceof String||0===Object.keys(n).length){var r=document.createElement("div");r.classList.add("noInfo"),r.innerHTML="No Information available",i.replaceChildren(r)}else{var s,o,a,u,l;if(null===(s=n=e({},this.getCurrentImage()))||void 0===s||delete s.src,n.camera){var c,h,d={camera:n.camera,lens:(null===(c=n.exif)||void 0===c?void 0:c.LensModel)||(null===(h=n)||void 0===h?void 0:h.Lens)};(u=new I(d)).classList.add("imageExif")}if(n.exif){var m,f,v,g,p,y,b={exposure:null===(m=n.exif)||void 0===m?void 0:m.ExposureTime,aperture:null===(f=n.exif)||void 0===f?void 0:f.FNumber,focus:null===(v=n.exif)||void 0===v?void 0:v.FocalLength,iso:null===(g=n.exif)||void 0===g?void 0:g.ISO};if(null!==(p=n.exif)&&void 0!==p&&p.Flash)"on"===(null===(y=n.exif)||void 0===y?void 0:y.Flash.substring(0,2).toLowerCase())?b.flash="on":b.noflash="off";(l=new I(b)).classList.add("imageExif")}var C={title:n.title,album:this.getAlbum().title,description:n.description,location:n.location,tags:n.tags,date:null===(o=n.dates)||void 0===o?void 0:o.taken,posted:null===(a=n.dates)||void 0===a?void 0:a.posted,gear:u,exif:l},w=new I(C);w.classList.add("imageInfo"),i.replaceChildren(w)}}}}]),t}(),S=function(t){l(i,t);var e=g(i);function i(){var t;s(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return u(v(t=e.call.apply(e,[this].concat(r))),"grid",25),u(v(t),"transitionDuration",40),u(v(t),"clipPathTransitionSpeed",2),u(v(t),"clipPath",void 0),u(v(t),"clipPathId","clipPathMask"),u(v(t),"maskedImage",void 0),u(v(t),"debugMask",!1),t}return a(i,[{key:"_onTransitionEnd",value:function(){p(c(i.prototype),"_onTransitionEnd",this).call(this)}},{key:"_onResize",value:function(){if(p(c(i.prototype),"_onResize",this).call(this),this.canvas){console.log("updating clipMask");var t=this.clipPath;this.createClipPath(),this.canvas.replaceChild(t,this.clipPath)}}},{key:"updateClipPathTransition",value:function(){var t={frame:this.transitionFrame-1,x:4*-this.grid,y:Math.max(this.height,this.width)-((this.transitionFrame||0)-5)*this.grid*this.clipPathTransitionSpeed,limitY:-this.height-this.clipPathNetSize.height,direction:this.currentDirection,suspended:this.suspended,userIdleTime:this.userIdleTime};this.dispatchEvent("onTransition",t),!t.suspended&&t.y<t.limitY&&(t.y=t.limitY,this.dispatchEvent("TransitionEnd"),document.getElementById("imageGroup1").removeAttributeNS(null,"clip-path")),this.clipPath.style.transform="rotate("+t.direction+"deg) translate("+t.x+"px, "+t.y+"px)"}},{key:"createClipPath",value:function(){var t,e,i,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=document.createElementNS(this.svgNS,this.debugMask?"g":"clipPath"),s=this.width,o=this.height,a=s/this.grid*this.transitionDuration/50,u=o/this.grid*this.transitionDuration/50,l=this.grid*Math.PI/4;for(i=0;i<=2*Math.max(a,u);i+=1){for(e=0;e<=2*Math.max(a,u);e+=1)if(!((t=i*l/(this.transitionDuration||10))<1)){if(t>l)break;var c=document.createElementNS(this.svgNS,"circle");c.setAttribute("cx",e*this.grid),c.setAttribute("cy",i*this.grid),c.setAttribute("r",t<l?t:l),c.setAttribute("fill","white"),c.setAttribute("stroke","none"),r.appendChild(c)}if(t>l)break}this.clipPathNetSize={width:4*s+2*this.grid,height:(i-1)*this.grid};var h=document.createElementNS(this.svgNS,"rect");return h.setAttributeNS(null,"x",-s),h.setAttributeNS(null,"y",(i-1)*this.grid),h.setAttributeNS(null,"width",4*s+2*this.grid),h.setAttributeNS(null,"height",4*o+2*this.grid),h.setAttributeNS(null,"stroke","none"),h.setAttributeNS(null,"fill","red"),r.appendChild(h),r.style.transformOrigin="center center",this.debugMask||(r.id=this.clipPathId||n),r}}]),i}(k),F=function(t){l(i,t);var e=g(i);function i(){var t;s(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return u(v(t=e.call.apply(e,[this].concat(r))),"transitionDuration",2),u(v(t),"clipPathTransitionSpeed",4),u(v(t),"fps",40),u(v(t),"objectFit","cover"),u(v(t),"img",[]),u(v(t),"imageLayersMax",3),u(v(t),"imageContainer",void 0),u(v(t),"imgStyle",{marginLeft:"auto",marginRight:"auto",objectFit:t.objectFit,width:"100%",height:"100%",position:"absolute",top:0,left:0}),u(v(t),"imgLayerStyle",{opacity:0,zIndex:t.img.length+1,position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,1)"}),t}return a(i,[{key:"updateClipPathTransition",value:function(){if(this.transitionFrame>this.transitionDuration*this.fps)this.dispatchEvent("TransitionEnd");else if(this.transitionFrame)for(var t=0;t<this.img.length;t++){var e=this.img[t];e.style.opacity<1&&(e.style.opacity=parseFloat(e.style.opacity)+1/this.transitionDuration/this.fps),e.style.zIndex=this.img.length-t}}},{key:"update",value:function(){p(c(i.prototype),"update",this).call(this),this.img[0].firstChild.style.transform}},{key:"_onImageLoad",value:function(t){this.suspended=!1,this.transitionFrame=0}},{key:"showImage",value:function(){var t=this,e=document.createElement("div"),i=document.createElement("img");i.src=this.getImageSrc(this.getCurrentImage()),i.addEventListener("error",(function(e){return t.dispatchEvent("Error",e)})),this.set(i.style,this.imgStyle),this.img.unshift(e),this.set(e.style,this.imgLayerStyle),e.appendChild(i),this.suspended=!0,this.transitionFrame=void 0,i.onload=function(e){return t._onImageLoad()},this.imageContainer.insertBefore(e,this.imageContainer.firstChild);for(var n=this.imageLayersMax;n<this.imageContainer.children.length;n++)this.imageContainer.removeChild(this.imageContainer.children[n]),this.img.pop()}},{key:"createCanvas",value:function(){console.log("creating canvas"),this.canvasContainer=document.createElement("div"),this.target.appendChild(this.canvasContainer),this.set(this.canvasContainer.style,{width:"100%",height:"100%",position:"absolute"}),this.canvasContainer.setAttribute("class","canvasContainer"),this.imageContainer=document.createElement("div"),this.canvasContainer.appendChild(this.imageContainer)}}]),i}(k),L=function(t){l(i,t);var e=g(i);function i(){var t;s(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return u(v(t=e.call.apply(e,[this].concat(r))),"transitionDuration",2),u(v(t),"clipPathTransitionSpeed",4),u(v(t),"fps",40),u(v(t),"img",[]),u(v(t),"imgStyle",{display:"block",width:"100%",objectFit:"cover",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(1)","backface-visibility":"hidden",transition:"transform 0.35s"}),u(v(t),"animationFrame",0),u(v(t),"imgLayerStyle",{opacity:0,zIndex:t.img.length+1,position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,1)"}),u(v(t),"imageContainer",void 0),t}return a(i,[{key:"updateClipPathTransition",value:function(){if(this.transitionFrame>this.transitionDuration*this.fps)this.dispatchEvent("TransitionEnd");else if(this.transitionFrame)for(var t=0;t<this.img.length;t++){var e=this.img[t];e.style.opacity<1&&(e.style.opacity=parseFloat(e.style.opacity)+1/this.transitionDuration/this.fps),e.style.zIndex=this.img.length-t}}},{key:"update",value:function(){p(c(i.prototype),"update",this).call(this);for(var t=0;t<this.img.length&&!(t>1);t++){this.img[t].animationFrame=void 0===this.img[t].animationFrame?0:this.img[t].animationFrame+1;var e=1+this.img[t].animationFrame/200/this.fps;this.img[t].firstChild.style.transform="translate(-50%, -50%) scale("+e+")"}}}]),i}(F),A=function(t){l(i,t);var e=g(i);function i(){var t,n,r,o,a,l,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;(s(this,i),u(v(r=e.call(this)),"menu",void 0),u(v(r),"buttons",void 0),u(v(r),"target",void 0),u(v(r),"title",void 0),u(v(r),"expanded",!1),u(v(r),"items",[]),u(v(r),"defaultMenuItemNum",void 0),u(v(r),"selectedMenuItemNum",void 0),r.menu=c,r.buttons=r.querySelectorAll((null===(t=r.attributes.button)||void 0===t?void 0:t.value)||"button.sandwich"),r.buttons.forEach((function(t){t.style="pointer-events: all;",t.addEventListener("click",(function(t){return r._onClick(t)}))})),r.attributes.target)&&(r.target=r.querySelector((null===(o=r.attributes.target)||void 0===o?void 0:o.value)||".content"));r.target||(r.target=document.createElement("div"),null!==(a=r.attributes.targetClass)&&void 0!==a&&a.value&&r.target.classList.add(r.attributes.targetClass.value.split(" ")),r.appendChild(r.target));(r.menu=r.querySelector((null===(n=r.attributes.menu)||void 0===n?void 0:n.value)||"ul.menu"),r.menu)?r.menu.querySelectorAll("li").forEach((function(t){var e=r.items.push(t);t.addEventListener("click",(function(t){return r._onClickMenuItem(e-1)})),t.style="cursor: pointer"})):(r.menu=document.createElement("ul"),null!==(l=r.attributes.menuClass)&&void 0!==l&&l.value&&r.menu.classList.add(r.attributes.menuClass.value.split(" ")),r.appendChild(r.menu));return r.createMenuItems(),console.log(r.items),r._onToggle(!1),r}return a(i,[{key:"createMenuItems",value:function(){var t=this;if(this.attributes.items.value){console.log(this.attributes.items.value);var e=JSON.parse(this.attributes.items.value);if(Array.isArray(e)){var i=function(){var i=document.createElement("li");if(e[n]instanceof String||"string"==typeof e[n])i.innerHTML=e[n];else{i.innerHTML=e[n].title;for(var r=0,s=Object.keys(e[n]);r<s.length;r++){var o=s[r];i.dataset[o]=e[n][o]}}i.style="cursor: pointer",t.menu.appendChild(i);var a=t.items.push(i)-1;i.addEventListener("click",(function(e){return t._onClickMenuItem(a)})),!0===e[n].default&&(t.defaultMenuItemNum=a,t.selectMenuItemNum(a))};for(var n in e)i()}console.log(this.items)}}},{key:"selectMenuItemNum",value:function(t){var e,i,n=this;t=void 0!==t?t:this.selectMenuItemNum;var r=this.items[t],s=null===(e=r.dataset)||void 0===e?void 0:e.link;console.log("selected",t,r,s),s||(s="/pages/"+r.innerHTML.toLowerCase()+".html"),this.target&&fetch(s).then((function(t){return t.text()})).then((function(t){var e=(new DOMParser).parseFromString(t,"text/html");n.target.innerHTML="",n.target.appendChild(e.body)})).catch((function(t){console.error("error loading ressource",r,t)})),null===(i=this.items[this.selectedMenuItemNum])||void 0===i||i.classList.remove("active"),this.selectedMenuItemNum=t,this.items[this.selectedMenuItemNum].classList.add("active")}},{key:"_onClickMenuItem",value:function(t){this.selectMenuItemNum(t)}},{key:"_onToggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.expanded=void 0!==t?t:!this.expanded;var e=[this.menu,this.target];this.attributes.permanent&&(e=this.children);for(var i=0;i<e.length;i++)e[i].classList.contains(this.attributes.permanent.value)||(this.expanded?e[i].classList.remove("hide"):e[i].classList.add("hide"));this.style.pointerEvents=this.expanded?"all":"none",this.onToggle&&this.onToggle(this.expanded)}},{key:"_onClick",value:function(t){this._onToggle()}}]),i}(f(HTMLElement));customElements.define("menu-sandwich",A);var N=1e3,T=60*N,x=60*T,P=24*x,O=7*P,M=365.25*P,j=function(t,e){e=e||{};var i=typeof t;if("string"===i&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var i=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*M;case"weeks":case"week":case"w":return i*O;case"days":case"day":case"d":return i*P;case"hours":case"hour":case"hrs":case"hr":case"h":return i*x;case"minutes":case"minute":case"mins":case"min":case"m":return i*T;case"seconds":case"second":case"secs":case"sec":case"s":return i*N;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}(t);if("number"===i&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=P)return _(t,e,P,"day");if(e>=x)return _(t,e,x,"hour");if(e>=T)return _(t,e,T,"minute");if(e>=N)return _(t,e,N,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=P)return Math.round(t/P)+"d";if(e>=x)return Math.round(t/x)+"h";if(e>=T)return Math.round(t/T)+"m";if(e>=N)return Math.round(t/N)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function _(t,e,i,n){var r=e>=1.5*i;return Math.round(t/i)+" "+n+(r?"s":"")}var D,B,R=function(t){function e(t){let n,r,s,o=null;function a(...t){if(!a.enabled)return;const i=a,r=Number(new Date),s=r-(n||r);i.diff=s,i.prev=n,i.curr=r,n=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((n,r)=>{if("%%"===n)return"%";o++;const s=e.formatters[r];if("function"==typeof s){const e=t[o];n=s.call(i,e),t.splice(o,1),o--}return n})),e.formatArgs.call(i,t);(i.log||e.log).apply(i,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=i,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(r!==e.namespaces&&(r=e.namespaces,s=e.enabled(t)),s),set:t=>{o=t}}),"function"==typeof e.init&&e.init(a),a}function i(t,i){const n=e(this.namespace+(void 0===i?":":i)+t);return n.log=this.log,n}function n(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(n),...e.skips.map(n).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let i;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length;for(i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let i,n;for(i=0,n=e.skips.length;i<n;i++)if(e.skips[i].test(t))return!1;for(i=0,n=e.names.length;i<n;i++)if(e.names[i].test(t))return!0;return!1},e.humanize=j,e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((i=>{e[i]=t[i]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let i=0;for(let e=0;e<t.length;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;return e.colors[Math.abs(i)%e.colors.length]},e.enable(e.load()),e},z=(D=function(t,e){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;e.splice(1,0,i,"color: inherit");let n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(n++,"%c"===t&&(r=n))})),e.splice(r,0,i)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=R(e);const{formatters:i}=t.exports;i.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},D(B={exports:{}},B.exports),B.exports);z.formatArgs,z.save,z.load,z.useColors,z.storage,z.destroy,z.colors,z.log;var q,H=z("app:log");function G(t){var e=document.getElementById("gallery");q&&q.destroy(),q="Fader"==t?new F(e):"Roam"===t?new L(e):"Gallery"===t?new k(e):new S(e),window.gallery=q,document.querySelectorAll(".requestFullscreen").forEach((function(t){q.requestFullscreen(t,document.getElementById("fullscreenRoot"))})),document.querySelectorAll("menu-sandwich").forEach((function(t){t.onToggle=function(t){t?q.dispatchEvent("PureStart"):q.dispatchEvent("PureEnd")}})),document.querySelectorAll("button.topic").forEach((function(e){e.dataset.topic===t?e.classList.add("active"):e.classList.remove("active")}));var i=new URLSearchParams(window.location.search),n=Object.fromEntries(i.entries());q.loadData("./data/meta.json").then((function(t){var e;t&&(q.setMetaData(t),null===(e=document.querySelectorAll(".meta-title"))||void 0===e||e.forEach((function(e){return e.innerHTML=null==t?void 0:t.title})))})),q.loadData("./data/albums.json").then((function(t){q.setImages(t),q.init(n),q.run()})),q.direction="random",q.onPureStart=function(){console.log("pure start"),q.onIdle(60)},q.onPureEnd=function(){q.onIdleEnd()},q.onIdle=function(t){60==t&&document.querySelectorAll(".idleHide").forEach((function(t){t.classList.add("hide")}))},q.onPauseStart=function(){U(!0)},q.onPauseEnd=function(){U(!1)},q.onIdleEnd=function(t){q.pureMode||document.querySelectorAll(".idleHide").forEach((function(t){t.classList.remove("hide")}))},q.onNavigation=function(t){document.querySelector("div.curtain")&&(document.querySelector("div.curtain").classList.add("hide"),setTimeout((function(){document.querySelector("div.curtain").classList.add("disabled"),document.body.removeChild(document.querySelector("div.curtain"))}),2e3),document.body.classList.remove("darkness")),q.currentDirection={"-1":90,"+1":270}[t.target]||q.currentDirection},q.onResize=function(){var t="scale(1)";document.body.style.webkitTransform=t,document.body.style.msTransform=t,document.body.style.transform=t,q.isFullscreen()||window.scrollTo(0,0)}}function U(t){document.querySelectorAll(".controls .button.toggle").forEach((function(e){console.log("update pause ",e),e.classList.add("stress"),t?e.classList.add("paused"):e.classList.remove("paused"),setTimeout((function(){e.classList.remove("stress")}),1e3)}))}z.enable("*"),H("Logging is enabled!"),window.startTheme=G,document.addEventListener("DOMContentLoaded",(function(){G("dotgain"),document.querySelectorAll("button.topic").forEach((function(t){return t.addEventListener("click",(function(){return G(t.dataset.topic)}))})),document.querySelectorAll(".controls .button.toggle").forEach((function(t){return t.addEventListener("click",(function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;q.setPaused(t)}()}))})),document.querySelectorAll(".controls .button.navi").forEach((function(t){return t.addEventListener("click",(function(){return e=t.dataset.target,void q.navigate(e);var e}))}))}))}();
